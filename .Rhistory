blogdown:::preview_site()
blogdown::new_post(title = "Test Post (OCDC Housing),")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = ".Rmarkdown", subdir = "post")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = '.Rmarkdown', subdir = "post")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = '.Rmarkdown', subdir = "post")
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
library(htmltools)
?HTML
blogdown:::preview_site()
blogdown::shortcode()
blogdown::shortcode(.name = "andrew")
blogdown::shortcode('image', "/img/ryan-pic.jpg")
blogdown::shortcode('fig', "/img/ryan-pic.jpg")
?shortcode
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg")
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", "Andrew Bell")
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")
`r blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")`
blogdown::chec check_site()
blogdown::check_site()
blogdown::clean_duplicates()
blogdown::clean_duplicates(preview = FALSE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::check_content()
blogdown::serve_site()
blogdown:::new_post_addin()
getwd()
setwd("~/Documents/GitHub/ojo-blog/content/post/2022-06-14-data-deep-dive-oklahoma-county-detention-center")
books <- ojo_tbl(schema = "ocdc",
table = "arrest") |>
collect()
# Setup ========================================================================
library(ojodb)
library(ggthemes)
library(tidyverse)
library(plotly)
library(shiny)
options(scipen = 999)
# OCDC Data
books <- ojo_tbl(schema = "ocdc",
table = "arrest") |>
collect()
write_rds(books, "./data/ocdc_books.rds")
daily_pop <- ojo_tbl(schema = "ocdc",
table = "daily_pop") |>
collect() |>
filter(day > ymd("2016-01-01"))
# daily_pop <- ojo_tbl(schema = "ocdc",
#                      table = "daily_pop") |>
#   collect() |>
#   filter(day > ymd("2016-01-01"))
write_rds(daily_pop, "./data/daily_pop.rds")
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
plot.background = NA
) +
theme_clean()
plot_prop
plot_pop
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
plot.background = NULL
) +
theme_clean()
plot_pop
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
panel.background = element_rect(fill='transparent'), #transparent panel bg
plot.background = element_rect(fill='transparent', color=NA), #transparent plot bg
panel.grid.major = element_blank(), #remove major gridlines
panel.grid.minor = element_blank(), #remove minor gridlines
legend.background = element_rect(fill='transparent'), #transparent legend bg
legend.box.background = element_rect(fill='transparent') #transparent legend panel
)
plot_pop
?include_app
blogdown::build_site()
blogdown::serve_site()
blogdown::check_site
blogdown::check_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::build_site()
?build_site
blogdown::build_site(build_rmd = T)
build_site()
library(blogdown)
build_site()
render_site()
blogdown::build_site()
blogdown::build_site(local = T)
build_site()
build_site()
build_site()
