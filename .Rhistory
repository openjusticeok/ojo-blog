blogdown:::preview_site()
blogdown::new_post(title = "Test Post (OCDC Housing),")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = ".Rmarkdown", subdir = "post")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = '.Rmarkdown', subdir = "post")
blogdown::new_post(title = "Test Post (OCDC Housing)", ext = '.Rmarkdown', subdir = "post")
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
library(htmltools)
?HTML
blogdown:::preview_site()
blogdown::shortcode()
blogdown::shortcode(.name = "andrew")
blogdown::shortcode('image', "/img/ryan-pic.jpg")
blogdown::shortcode('fig', "/img/ryan-pic.jpg")
?shortcode
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg")
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", "Andrew Bell")
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")
`r blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")`
blogdown::chec check_site()
blogdown::check_site()
blogdown::clean_duplicates()
blogdown::clean_duplicates(preview = FALSE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::check_content()
blogdown::serve_site()
blogdown:::new_post_addin()
getwd()
setwd("~/Documents/GitHub/ojo-blog/content/post/2022-06-14-data-deep-dive-oklahoma-county-detention-center")
books <- ojo_tbl(schema = "ocdc",
table = "arrest") |>
collect()
# Setup ========================================================================
library(ojodb)
library(ggthemes)
library(tidyverse)
library(plotly)
library(shiny)
options(scipen = 999)
# OCDC Data
books <- ojo_tbl(schema = "ocdc",
table = "arrest") |>
collect()
write_rds(books, "./data/ocdc_books.rds")
daily_pop <- ojo_tbl(schema = "ocdc",
table = "daily_pop") |>
collect() |>
filter(day > ymd("2016-01-01"))
# daily_pop <- ojo_tbl(schema = "ocdc",
#                      table = "daily_pop") |>
#   collect() |>
#   filter(day > ymd("2016-01-01"))
write_rds(daily_pop, "./data/daily_pop.rds")
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
plot.background = NA
) +
theme_clean()
plot_prop
plot_pop
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
plot.background = NULL
) +
theme_clean()
plot_pop
# OCDC Daily Population
plot_pop <- daily_pop |>
ggplot(aes(x = day,
y = pop,
text = paste0("Date: ", day, "<br>",
"Population: ", format(pop, big.mark = ",")),
group = 1,
)) +
geom_line() +
scale_y_continuous(limits = c(0, NA),
labels = scales::comma) +
# SQ lines
# geom_vline(xintercept = as.numeric(ymd("2017-7-01")), linetype = "dashed", color = "red") +
# annotate(geom = "text", color = "red", label = " SQ 780 Effective Date", x = ymd("2017-7-01"), y = 800) +
# geom_vline(xintercept = as.numeric(ymd("2018-7-01")), linetype = "dashed", color = "green") +
# annotate(geom = "text", color = "green", label = " SQ 787 Effective Date", x = ymd("2018-7-01"), y = 1200) +
labs(
title = "Oklahoma County Jail Population, 2016-2022",
x = "Date",
y = "OCDC Jail Population"
) +
theme(
text = element_text(family = "Roboto Mono"),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_text(hjust = 0.5),
panel.background = element_rect(fill='transparent'), #transparent panel bg
plot.background = element_rect(fill='transparent', color=NA), #transparent plot bg
panel.grid.major = element_blank(), #remove major gridlines
panel.grid.minor = element_blank(), #remove minor gridlines
legend.background = element_rect(fill='transparent'), #transparent legend bg
legend.box.background = element_rect(fill='transparent') #transparent legend panel
)
plot_pop
?include_app
blogdown::build_site()
blogdown::serve_site()
blogdown::check_site
blogdown::check_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::build_site()
?build_site
blogdown::build_site(build_rmd = T)
build_site()
library(blogdown)
build_site()
render_site()
blogdown::build_site()
blogdown::build_site(local = T)
build_site()
build_site()
build_site()
setwd("~/Documents/GitHub/ojo-blog")
build_site()
blogdown::build_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
`r blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")`
blogdown::shortcode('figure', src = "/img/ryan-pic.jpg", title = "Ryan Gentzler")
blogdown::shortcode('figure', src = "/img/brancen-pic.png", title = "Brancen Gregory")
blogdown::shortcode('figure', src = "/img/ashley-pic.png", title = "Ashley Harvey")
bllogdown::shortcode('figure', src = "/img/andrew-pic.png", title = "Andrew Bell")
blogdown::shortcode('figure', src = "/img/andrew-pic.png", title = "Andrew Bell")
blogdown::shortcode('figure', src = "/img/hunter-pic.png", title = "Hunter McCans")
blogdown::shortcode('tweet', user="ndrew_bell", id="1516966669213704198")
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogd]
blogdown::serve_site()
blogdown::build_site()
blogdown::build_site()
blogdown::build_site()
blogdown::serve_site()
getwd()
blogdown::new_post(title = "Stat Spotlight: Evictions Are Soaring in Oklahoma", ".Rmarkdown")
library(ojodb)
library(ojodb)
library(tidyverse)
ojo_list_tables()
ds <- ojo_civ_cases(case_types = "SC", file_years = c(2019:2022))
ds <- ojo_civ_cases(case_types = "SC", file_years = c(2019:2022)) |>
collect()
View(ds)
ds <- ojo_civ_cases(case_types = "SC", file_years = c(2019:2022)) |>
filter(str_detect(description, "FORCI")) |>
collect()
View(ds)
ds |>
count(month_filed = floor_date(date_filed, "months")) |>
ggplot(aes(x = month_filed,
y = n)) +
geom_line()
ds |>
count(month_filed = floor_date(date_filed, "months")) #|>
ds |>
count(month_filed = floor_date(date_filed, "months")) |> view()
ds |>
count(month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n)) +
geom_line()
ds |>
count(month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n,
color = county)) +
geom_line()
ds |>
count(month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n,
color = court)) +
geom_line()
ds |>
count(district, month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line()
ds |>
count(district, month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none")
ds |>
count(district, week_filed = floor_date(date_filed, "weeks")) |>
filter(week_filed < ymd("2022-06-01")) |>
ggplot(aes(x = week_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none")
ds |>
count(district, month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none")
ds |>
count(district, month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01")) |> view()
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "transparent")
)
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "transparent")
)
monthly_filings <- ds |>
count(district, month_filed = floor_date(date_filed, "months")) |>
filter(month_filed < ymd("2022-06-01"))
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "transparent")
)
graph
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "transparent"),
panel.background = element_rect(fill = "transparent")
)
graph
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "none"),
panel.background = element_rect(fill = "none")
)
graph
graph <- monthly_filings |>
ggplot(aes(x = month_filed,
y = n,
color = district)) +
geom_line() +
scale_y_continuous(limits = c(0, NA)) +
guides(color = "none") +
ggthemes::theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "transparent"),
panel.background = element_rect(fill = "transparent")
)
graph
